
## Завдання:
   Доповнити функціонал попереднього завдання відповідно до демонстрації та вимог, технічного завдання:
   Посилання на демонстрацію: https://youtu.be/ctXhovlCk2U
   Посилання на API:
      - https://www.boredapi.com/documentation#endpoints-type
      - https://rapidapi.com/sohailglt/api/translate-plus/
      - https://rapidapi.com/microsoft-azure-org-microsoft-cognitive-services/api/bing-image-search1/
   
   Посилання на PROXI: https://corsproxy.io/? (на випадок помилки C.O.R.S в консолі)

## Вимоги
   1. Назви змінних повинні відповідати контенту, який ми їм присвоюємо, не використовувати назви типу a, b тощо. Виняток - назви ітераторів в циклах (for let i = 0 тощо).
   2. Назви функцій - мають коротко описувати дію (або не дуже коротко). Назва має бути змістовною і зрозумілою
   3. За можливості уникаємо дублювання дій. Якщо помічаємо, що виконуємо однотипний набір дій - значить, можна трохи прокачати код, написавши функцію, яка виконуватиме однотипні дії за нас.
   4. Дії до обробників подій виносимо окремо, щоб в обробнику подій було мінімум коду - виклики функції, наприклад. Як ми це робили в попередніх ДЗ.
   5. Нічого не додаємо, не змінюємо і не видаляємо з файлів index.html, файла style.css, а також у папці templates
   6. Користуємося знаннями, набутими в попередніх уроках.  

## Поради
   1. Виносьте основні елемент розмітки (з index.html), що будуть задіяні в процесі створення проєкта, вгорі js-файлів в змінні (const або let). Задайте для них зрозумілі назви. 
   2. Після ознайомлення з деталями проєкту в цьому файлі, пробуємо розбити функціонал проєкта на дрібніші підзадачі (для себе). Визначаємо, які функції нам знадобляться для функціонування тих чи інших елементів, які параметри ці функції прийматимуть, що відбуватиметься на сторінці після їхнього використання, в який саме момент і в якій послідовності функції будуть працювати. 
   Важливо хоча б мінімально продумати структуру проєкта, намітити шлях виконання, логіку.


## З чого почати
   ### Ознайомитися з файлами проєкта:
   - основний файл розмітки index.html. У розмітці є купа класів, яких немає у файлі style.css. Тут використано бібліотеку https://tailwindcss.com/, тому у елементів так багато класів
   - файли стилів у папці css (подивитися на зміни класів/стилів. )
   - файли заготовок для задачі - /templates


## Формування URL для запиту boredapi
   * Зараз за замовчування url для запиту на отримання випадкової активності виглядає ось так http://www.boredapi.com/api/activity/
   Потрібно змінити дещо, в залежності від умов:
   - По-перше, треба зробити так, щоб за замовчуванням кількість учасників дорівнювала одному (1)
   При клікові на відповідні цифри кількість учасників має змінюватися
   - Аналогічно і для типів активностей. За замовчуванням ми отримуємо активність з будь-якої з наявних категорії. Тож, по-друге, треба зробити так, щоб при зміні категорії(типу активності) також змінювався і url. Не забуваємо, що там вже є якесь число учасників, тож треба це врахувати при формуванні посилання.

## Клік на кнопку "Get activity"
   * Після кліку на кнопку "Get activity", якщо за запитом знайдено активність, має показатися блок картки активності .activity-card. За замовчуванням він прихований (див. style.css)
   Поки іде запит на сервер, кнопка міняється на кнопку з текстом "Loading..." (див. index.html). Додаємо/прибираємо клас hidden 

      P.S. Якщо треба вповільнити швидкість запиту для перегляду ефектів зміни кнопок, то в інспекторі(в панелі розробника), у вкладці Network обираємо throttling https://i.imgur.com/uoBHClC.jpg slow3G або fast3G

      - Якщо це НЕ перший клік по кнопці, то .activity-card буквально ховається і потім показується знов, вже з новою активністю

      - На картці є поле для тексту, туди має вставлятися назва активності, яку ми отримали за запитом з boredapi

      - Також у картці є ще три кнопки (кнопка перекладу, кнопка "Load images" та кнопка "Add to my list")
   
   * Якщо ж за запитом нічого не знайдено, то замість попереднього сценарію, маємо отримати інший блок, куди буде вставлено текст помилки - блок .error-card (див. index.html)
   Текст помилки придумати самостійно)

   * Якщо в блоці справа .right-block вже є активності і вони відфільтровані (тобто у .filters є елементи фільтрів), то нова активність 
      - або має додатися до загального і відфільтрованого списку, якщо збігається за параметрами фільтрів
      - або додатися до загального списку і не показуватися у відфільтрованому спискові через відсутність збігів між активністю та вже застосованими фільтрами
   
   ### Клік на кнопку перекладу https://i.imgur.com/Glkp4Eh.jpg
   - Після кліку на кнопку іде запит на API: https://rapidapi.com/sohailglt/api/translate-plus/ (або ж будь-яке альтернативне API для перекладу). У відеоогляді показував, як працювати з цим API.

   - Також після виконання запиту під текстом активності показується блок .translated-text (див. index.html)

   ВАЖЛИВО!!! Не забуваємо, що треба отримати дані у форматі json, а не text

   ### Клік на кнопку "Load images"
      - Ховаємо кнопку по якій клікнули / показуємо кнопку з текстом Search for images...(див. index.html)

      - Блокуємо кнопку "Add to my list", додаючи атрибут disabled (щоб неможливо було додати активність до списку під час обробки запиту)

      - І далі виконуємо дії. Розіб'ю на три етапи, бо тут, окрім отримання зображень, треба ще обробити додатково дані:

      * I-етап: 
      
         - Після кліку на кнопку іде запит на API: https://rapidapi.com/microsoft-azure-org-microsoft-cognitive-services/api/bing-image-search1/
         У відеоогляді показував, як працювати з цим API.
         - Текст запиту для цього API - це текст активності.
         - ВАЖЛИВО!!! Не забуваємо, що треба отримати дані у форматі json, а не text
         - Після отримання даних із запиту, подивитися на властивості об'єкта, знайти дані про розмір елемента зображення та посилання на зображення
         - Також не забуваємо додавати перевірки у випадку помилки у запиті
         - Після обробки запиту ховаємо і кнопку "Search for images..."
         - До блока .images додається клас .loading (див. index.html, style.css)

      ІI-етап:
         - Сформувати масив із зображеннями, які за розміром не більше 100000 байтів(~100кб). У масиві мають бути лише посилання на зображення.
         - Перевірити усі зображення на можливість/неможливість завантажуватися (можна відправити запит до кожного із зображень; у випадку, якщо за запитом немає помилок, вважати, що url працює)
         - усі робочі url мають бути в новому масиві

      ІІI-етап:
         - Далі зі сформованого масиву додаємо зображення в блок .images, для цього використовуємо шаблон image-item.html у папці /templates
         Часом посилання зі сформованого масиву можуть завантажуватися довго або ж при завантеженні виникатимуть помилки, тож краще спробувати додавати їх за допомогою метода .onload https://uk.javascript.info/onload-onerror
         Після того як останнє зображення завантажено, прибираємо з блоку .images клас loading, а також прибираємо disabled з кнопки "Add to my list"

      P.S. Клік на зображення має відкривати його у новій вкладці (відповідно до розмітки в шаблоні)
      
   ### Клік на кнопку "Add to my list"
      * Після кліку по кнопці:
       - ховаємо блок .activity-card__content (див. index.html)
       - кнопка "Add to my list" стає disabled та змінює текст на "Added" (Щоб повторно не додати ту саму активність)
       - показуємо блок .right-side

       * завдання додається в список .activity-list за шаблоном activity-item.html
         При формуванні розмітки також треба врахувати кілька нюансів:
         - якщо у картці перед додаванням був здійснений переклад, то в шаблоні має з'явитися кнопка перекладу з show-translation.html
         - аналогічно і для зображень. Якщо зображення були завантажені, то має з'явитися кнопка з show-images.html

      * Якщо активність вже є в нашому списку, то вона не має бути додана вдруге, показуємо блок 
         .error-card з помилкою

## Робота з карткою активності
   Картки активності мають бути наповнені відповідно до активностей, які ми додаємо, з урахуванням опцій (переклад і/або завантажені зображення)
   Далі працюємо з діями на картці активності:

   ### кнопка видалення
   * після кліку елемент зникає зі сторінки
   * після оновлення сторінки видалена активність не повинна показуватися
   * якщо були застосовані фільтри і елемент в списку останній, то очищаємо фільтри у блоці .filters
   * якщо це в цілому останній елемент зі списку, то після видалення ховаємо блок .right-side

   ### кнопка "Показати/сховати переклад"
   * має показатися/сховатися переклад. Використовуємо шаблон translates-text.html

   ### кнопка "Показати зображення"
      При клікові має відкриватися галерея з зображеннями
      Тут не треба писати все з нуля, просто потрібно допрацювати файл photo.js

      *** Робота з файлом photo.js ***
         - photo.js це додатковий скрипт для роботи галереї
         Тут вже підключено плагін, що при клікові на кнопку має відкривати галерею з зображеннями.
         
         У цілому треба просто знайти масив із зображеннями конкретної активності
         і підставити замість коментарів потрібні дані:

         1 - Замість /* Треба повернути кількість слайдів */ - має бути вираз/змінна, де зберігається кількість слайдів(фактично кількість зображень в масив з картинками до конкретної активності)

         2 - Замість /* вказати шлях до зображення */ - має бути шлях до зображення. Фактично це буде динамічний вираз, тобто зважаємо на те, що у нас масив
         Параметр "index" підставить необхідний номер https://i.imgur.com/ZZG9Kw6.jpg
         Тобто ця функція https://i.imgur.com/EqcIj6F.jpg працюватиме як цикл, який обходить масив із зображеннями і підставляє до елемента потрібні параметри

         На всяк випадок документація на бібліотеку PhotoSwipeLightbox
         https://photoswipe.com/getting-started

         P.S. Якщо дуже хочеться, то можна спробувати зробити схожу галерею самотужки))


   ### фільтр "participants" (учасники)
      - Після кліку фільтруємо список активностей за кількістю учасників(participants). Тобто якщо обрали в одній з карток "1", то у спискові мають лишитися лише картки з активністю, де кількість учасників дорівнює "1" 
      - також додаємо у блок .filters(див. index.html) фільтр за шаблоном filter-item.html
      - !!!УВАЖНО з ключем(key - https://i.imgur.com/jRXvlEA.jpg) в шаблоні, має бути participants 
      - Значення в .filters__text має відповідати обраному значенню

   ### фільтр "type" (тип активності/категорія)
      - Після кліку фільтруємо список активностей за типом(type). Тобто якщо обрали в одній з карток "music", то у спискові мають лишитися лише картки з активністю, де тип "music"  
      - !!!УВАЖНО з ключем(key - https://i.imgur.com/jRXvlEA.jpg) в шаблоні, має бути type
      - Значення в .filters__text має відповідати обраному значенню


## Робота зі списком активностей
   * Список з активностями має показуватися користувачеві навіть після перезавантаження сторінки відповідно до використаних фільтрів
   * Також список разом із блоком .right-side має зникати, якщо активності відсутні

   ### Пошук

      - при друкові у полі відбувається фільтрація, тобто оновлюємо список активностей відповідно до введеного тексту

      - якщо є й інші фільтри, то шукаємо по вже відфільтрованому списку

      - також при події blur додаємо у блок .filters(див. index.html) фільтр за шаблоном filter-item.html
      - !!!УВАЖНО з ключем(key - https://i.imgur.com/jRXvlEA.jpg) в шаблоні, має бути search
      - Значення в .filters__text має відповідати обраному значенню

      Якщо значення пошуку порожнє, то не додавати порожній шаблон фільтра на сторінку

   ### Фільтри 
      - не мають бути більше одного з кожного виду. Тобто фільтр учасників лише 1, фільтр типів лише 1, фільтр пошуку лише 1 
      - після оновлення сторінкі фільтри мають залишитися в тому ж стані, що й були до оновлення
      *** клік по кнопці "видалити" ***
         - при видаленні оновлюємо фільтрацію списку активностей
         - видаляємо поточний фільтр з .filters

## Використання проксі

   * Що таке "проксі" - це своєрідний посередник між тобою і веб-сайтом. Замість того, щоб йти напряму, твій запит спочатку йде через проксі, який може забезпечити анонімність, фільтрацію вмісту чи інші корисні функції.

   * В якому випадку використовувати?
      У багатьох випадках використання проксі може вирішити проблеми з CORS (Cross-Origin Resource Sharing). Якщо ти отримуєш помилку CORS при спробі здійснити запит з одного джерела до іншого, то використання проксі-сервера може дозволити обійти ці обмеження. Проксі може робити запити від свого власного джерела, і потім твій локальний сервер отримує дані від проксі, що уникає CORS.

      Часто виникають проблеми з доступом з localhost до якихось ресурсів

   * Як використовувати?
      Якщо після запитів на сервер у консолі з'являються помилки з помилками доступу або проблемами з cors, то можна спробувати обійти це за допомогою проксі. 

      Як приклад можна додати посилання на проксі перед посиланням для запиту

      - Створюємо константу, яка перевіряє чи введена адреса в браузері 'localhost'. Зазвичай, в консолі в помилці буде вказано проблемний IP. У моєму випадку це '127.0.0.1'

      const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';

      - далі записуємо адресу проксі-сервера в змінну

      const PROXI = 'https://corsproxy.io/?';

      - і створюєму змінну, яка перевірятиме чи треба нам використовувати проксі, чи ні. Тобто якщо розробка буде вестися локально, то проксі буде використаний, якщо ні, то ні.

      const useProxy = isLocalhost ? PROXI : '';

      - і тепер можна використовувати useProxy, доклеюючи його до адрес, з запитами на які виникають проблеми. 

      Приклад без контексту:
      const URL = useProxy + imageURL;
      ...
      const response = await fetch(URL);

      